!function(n){"use strict";function t(){jQuery("li .epofw_data_condition").each(function(){var e,t,a,i=n(this).val();e=".epofw_condition_data_class_"+i,t="epofw_get_data_based_on_cd",a=i,jQuery(e).each(function(){jQuery(e).select2({ajax:{url:epofw_var.ajaxurl,dataType:"json",delay:250,type:"post",data:function(e){return{value:e.term,current_condition:a,action:t}},processResults:function(e){var a=[];return e&&n.each(e,function(e,t){a.push({id:t[0],text:t[1].replace("&#8211;","–").replace("&gt;",">").replace("&lt;","<").replace("&#197;","Å")})}),{results:a}},cache:!0},minimumInputLength:3})})})}n(document).ajaxComplete(function(){n(".epofw_datepicker").length&&n(".epofw_datepicker").datepicker({dateFormat:"dd-mm-yy"}),n(".epofw_timepicker").length&&n(".epofw_timepicker").timepicker({timeFormat:"hh:mm:ss tt"}),n(".epofw_colorpicker").length&&n(".epofw_colorpicker").wpColorPicker()});var e={init:function(){n(".accordion_ct_div").hide(),t(),n(".tips, .help_tip, .woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200}),jQuery(document).on("change","#epofw_type",e.changeFieldType),jQuery(document).on("click","#add-new-opt",e.cloneOptions),jQuery(document).on("click","#remove-opt",e.removeOptions),jQuery(document).on("change",".epofw_data_condition",e.getDataBasedOnCondition),jQuery(document).on("click",".add_field_id",e.cloneFieldOptions),jQuery(document).on("click",".accordion_cls_title .accordion_a_cls",e.accordianACls),jQuery(document).on("click",".accordion_cls_title .accordion_a_cls_remove",e.removeAccordian),jQuery(document).on("change",'#enable_price_extra input[type="checkbox"]',e.enablePrice),jQuery(document).on("change",'#enable_title_extra input[type="checkbox"]',e.enableTitleExtra),jQuery(document).on("change",'#enable_subtitle_extra input[type="checkbox"]',e.enableSubTitleExtra),jQuery(document).on("change",".epofw_options_chk_all",e.epofwOptionsChkAll),jQuery(document).on("click",".disable_all_options ",e.disableAllOptions),jQuery(document).on("click",".epofw_options_chk ",e.epofwSingleOptions)},epofwSingleOptions:function(){jQuery(".epofw_options_chk_all").is(":checked")||(jQuery(".epofw_options_chk").is(":checked")?n(".disable_all_options").removeClass("hide").addClass("show"):n(".disable_all_options").removeClass("show").addClass("hide"))},disableAllOptions:function(){var e=[];jQuery(".accordion_cls").each(function(){jQuery(this).find(".epofw_chk_data .epofw_options_chk").is(":checked")&&e.push(jQuery(this).attr("data-id"))}),jQuery.ajax({type:"post",url:epofw_var.ajaxurl,data:{action:"epofw_disbale_field_options",get_post_id:epofw_var.get_post_id,field_ids:e},success:function(e){e&&!0===e.success&&window.location.reload()},error:function(e){console.log(e)}})},epofwOptionsChkAll:function(){jQuery(this).is(":checked")?(jQuery(".accordion_cls").each(function(){n(".epofw_chk_data .epofw_options_chk").prop("checked",!0)}),n(".disable_all_options").removeClass("hide").addClass("show")):(jQuery(".accordion_cls").each(function(){n(".epofw_chk_data .epofw_options_chk").removeAttr("checked")}),n(".disable_all_options").removeClass("show").addClass("hide"))},enableSubTitleExtra:function(){var e=n(this).parent().parent().parent().parent().attr("id");jQuery(this).is(":checked")?jQuery("#"+e+" #subtitle_extra").show():jQuery("#"+e+" #subtitle_extra").hide()},enableTitleExtra:function(){var e=n(this).parent().parent().parent().parent().attr("id");jQuery(this).is(":checked")?jQuery("#"+e+" #title_extra").show():jQuery("#"+e+" #title_extra").hide()},enablePrice:function(){var e=n(this).parent().parent().parent().parent().attr("id");jQuery(this).is(":checked")?jQuery("#"+e+" #price_extra").show():jQuery("#"+e+" #price_extra").hide()},removeAccordian:function(){return confirm("Are you sure want to delete this field")&&n(this).parent().parent().remove(),!1},accordianACls:function(){n(this).parent().toggleClass("active"),n(this).toggleClass("active"),n(this).hasClass("active")?n(this).find("span.dashicons").removeClass("dashicons-arrow-right-alt2").addClass("dashicons-arrow-down-alt2"):n(this).find("span.dashicons").removeClass("dashicons-arrow-down-alt2").addClass("dashicons-arrow-right-alt2"),n(this).parent().next().slideToggle("fast")},cloneFieldOptions:function(){var e=n(this).parents().find(".accordion_cls:last"),t=n(this).parents().find(".accordion_cls").length+1,i=Math.floor(1e9*Math.random()),a=e.clone().prop("id","accordion_"+i);e.after(a),a.find("h3.ui-accordion-header").attr("id","ui-id-"+i),a.find("h3.ui-accordion-header").html("Field "+i),a.find("h3 span.ui-accordion-header-icon").attr("class","ui-accordion-header-icon ui-icon ui-icon-triangle-"+i+"-e"),a.find("div.ui-accordion-content").attr("aria-labelledby","ui-id-"+i),a.find(".addon_fields").attr("id","addon_fields_"+i),a.find(".addon_field").attr("id","addon_field"+i),a.find(".addon_field").attr("data-id",i),a.find(".heading_nu_title span").html(t);t=a.find(".addon_field .text-class");n.each(t,function(e,t){var a=n(t),t=a.attr("name").replace(/\d+/,i);a.attr("name",t)});a=a.find(".addon_field .default_num_class");n.each(a,function(e,t){var a=n(t),t=a.val().replace(/\d+/,Math.floor(1e9*Math.random()));a.val(t)})},getDataBasedOnCondition:function(){n(".multiselect2").select2("destroy");var e=n(this).val();n(this).parents().find("li .multiselect2").attr("class","epofw_condition_data_class_"+e+" epofw_"+e+"_condition_data_class multiselect2"),t(),n(this).parents().find("li .multiselect2").val(null).trigger("change.select2")},changeFieldType:function(){var e=n(this).val(),t=n(this).parents().parents().parents().parents().attr("data-id"),a="accordion_"+t;jQuery.ajax({type:"post",url:epofw_var.ajaxurl,data:{action:"epofw_change_field_basedon_type",current_val:e,parent_id:t},success:function(e){n("#"+a+" .fields_h2").remove(""),n("#"+a+" .general_field").remove(),n("#"+a+" #cop_ft_id").after(e),n(".opt-li").length&&(1<parseInt(n(".opt-li").length)?n(".opt-li:not(:first) .remove-opt-btn").show():n(".opt-li:first .remove-opt-btn").hide()),n("#"+a+" #title_extra").hide(),n("#"+a+" #subtitle_extra").hide(),n("#"+a+" #price_extra").hide()},error:function(e){console.log(e)}})},cloneOptions:function(){var e=n(this).parent().parent().find("li:last"),a=parseInt(e.prop("id").match(/\d+/g),10)+1,t=e.clone().prop("id","opt-li-"+a),i=t.find("input");n.each(i,function(e,t){n(t).prop("id","select-opt-value-"+a)}),n(".remove-opt-btn").show(),e.after(t),n(".opt-li:first .remove-opt-btn").hide(),n(".opt-li:not(:first) .remove-opt-btn").show()},removeOptions:function(){n(this).parent().remove()}};n(function(){n(".addon_fields_accordian_data").length&&n(".addon_fields_accordian_data").sortable(),n(".epofw_datepicker").length&&n(".epofw_datepicker").datepicker({dateFormat:"dd-mm-yy"}),n(".epofw_timepicker").length&&n(".epofw_timepicker").timepicker({timeFormat:"hh:mm:ss tt"}),n(".epofw_colorpicker").length&&n(".epofw_colorpicker").wpColorPicker(),n('.accordion_cls #enable_title_extra input[type="checkbox"]').each(function(){var e=n(this).parent().parent().parent().parent().attr("id"),t=n(this).parent().parent().parent().attr("id"),t=n.trim(t.replace("enable_",""));n(n(this)).is(":checked")?n("#"+e+" #"+t).show():n("#"+e+" #"+t).hide()}),n('.accordion_cls #enable_subtitle_extra input[type="checkbox"]').each(function(){var e=n(this).parent().parent().parent().parent().attr("id"),t=n(this).parent().parent().parent().attr("id"),t=n.trim(t.replace("enable_",""));n(n(this)).is(":checked")?n("#"+e+" #"+t).show():n("#"+e+" #"+t).hide()}),n('.accordion_cls #enable_price_extra input[type="checkbox"]').each(function(){var e=n(this).parent().parent().parent().parent().attr("id"),t=n(this).parent().parent().parent().attr("id"),t=n.trim(t.replace("enable_",""));n(n(this)).is(":checked")?n("#"+e+" #"+t).show():n("#"+e+" #"+t).hide()}),e.init()})}(jQuery);
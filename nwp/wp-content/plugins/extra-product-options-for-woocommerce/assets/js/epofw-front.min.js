!function(d){"use strict";var c=epofw_front_var.currency,l=epofw_front_var.decimal_separator,s=epofw_front_var.thousand_separator,p=epofw_front_var.decimals,h=epofw_front_var.position;function f(t,e,a){var r=document.createElement("tr");r.setAttribute("id",t),r.setAttribute("class","addon_item");var i=document.createElement("td"),t=document.createTextNode(e);i.appendChild(t);e=document.createElement("td");e.setAttribute("class","addon_price");var n,t=_(a);return void 0!==a&&(a=u(a,p,l,s)),e.setAttribute("data-addon-price",t),e.setAttribute("data-addon-og-price",a),"left_space"==h?n=document.createTextNode(c+" "+a):"left"==h?n=document.createTextNode(c+a):"right_space"==h?n=document.createTextNode(a+" "+c):"right"==h&&(n=document.createTextNode(a+c)),e.appendChild(n),r.appendChild(i),r.appendChild(e),r}function _(t){var e=t;return e=-1!=(t=t.toString()).indexOf(l)?t.replace(l,"."):e}function u(t,e,a,r){if(null==t)throw new TypeError("number is not valid");t=((t=t.toString())+"").replace(/[^0-9+\-Ee.]/g,"");var i=isFinite(+t)?+t:0,t=isFinite(+e)?Math.abs(e):0,e=void 0===r?",":r,r=void 0===a?".":a,a="";return 3<(a=(t?function(t,e){e=Math.pow(10,e);return""+Math.round(t*e)/e}(i,t):""+Math.round(i)).split("."))[0].length&&(a[0]=a[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,e)),(a[1]||"").length<t&&(a[1]=a[1]||"",a[1]+=new Array(t-a[1].length+1).join("0")),a.join(r)}function m(){var t,e;!d("form.cart").hasClass("variations_form")||(e=a(d(".variations_form").data("product_variations"),(t=r()).data))&&t.count==t.chosenCount&&e.hasOwnProperty(0)&&d(".epofw_fields_table").length&&d(".epofw_fields_table").is(":visible")&&(e=(t=e[0].display_price).toFixed(p).replace(".",l),d("#addon_prd_details .addon_price").attr("data-addon-price",t),d("#addon_prd_details .addon_price").attr("data-epofw-prd-price",t),d("#addon_prd_details .addon_price strong span").html('<span class="woocommerce-Price-currencySymbol">'+c+"</span>"+e))}function v(){0===d("#addon_total tr.addon_item").length?d("#addon_total").hide():d("#addon_total").show();var t,e=0;d("#addon_total tr td.addon_price").each(function(){e=parseFloat(e)+parseFloat(d(this).attr("data-addon-price"))}),void 0!==e&&(e=u(e,p,l,s)),"left_space"==h?t=c+" "+e:"left"==h?t=c+e:"right_space"==h?t=e+" "+c:"right"==h&&(t=e+c),d("#addon_subtotal td:last strong").html(t)}function g(t,e,a,r){var i,n,o=d("#addon_total");""!==t?(0===o.find("tr#"+e).length?i=f(e,a,r):(o.find("tr#"+e).find("td:first").html(a),void 0!==(r=_(r))&&(r=u(r,p,l,s)),"left_space"==h?n=c+" "+r:"left"==h?n=c+r:"right_space"==h?n=r+" "+c:"right"==h&&(n=r+c),o.find("tr#"+e).find("td:last").html(n),o.find("tr#"+e).find("td:last").attr("data-addon-price",r)),d("#addon_total #addon_subtotal").before(i)):o.find("tr#"+e).remove()}function a(t,e){for(var a=[],r=0;r<t.length;r++){var i=t[r];!function(t,e){var a,r=!0;for(a in t){var i,n;t.hasOwnProperty(a)&&(i=t[a],n=e[a],void 0!==i&&void 0!==n&&0!==i.length&&0!==n.length&&i!==n&&(r=!1))}return r}(i.attributes,e)||a.push(i)}return a}function r(){var a={},r=0,i=0;return d(".variations_form").find(".variations select").each(function(){var t=d(this).data("attribute_name")||d(this).attr("name"),e=d(this).val()||"";0<e.length&&i++,r++,a[t]=e}),{count:r,chosenCount:i,data:a}}var i={init:function(){var t,e,a,r;d(document).click(function(t){d(t.target).is(".epofw_dft_colorpicker")||d(".epofw_dft_colorpicker").iris("hide")}),d(".epofw_dft_colorpicker").click(function(){return d(".epofw_dft_colorpicker").iris("hide"),d(this).iris("show"),!1}),d(".epofw_dft_multiselect").length&&d(".epofw_dft_multiselect").select2(),d(".epofw_dft_datepicker").length&&d(".epofw_dft_datepicker").each(function(){var t=d(this).attr("id");d("#"+t).datepicker({dateFormat:"dd-mm-yy"})}),d(".epofw_dft_timepicker").length&&d(".epofw_dft_timepicker").each(function(){var t=d(this).attr("id");d("#"+t).timepicker({timeFormat:"hh:mm:ss TT"})}),d(".epofw_dft_colorpicker").length&&d(".epofw_dft_colorpicker").each(function(){var r=d(this).attr("id"),i=d(this).attr("addon_price"),n=d(this).attr("data-label-name");d("#"+r).iris({change:function(t,e){var a=e.color.toString(),e=n+" - "+a;0===d("tr#"+r).length?(a=f(r,e,i),d("#addon_total #addon_subtotal").before(a)):d("tr#"+r).find("td:first").html(e),v()},clear:function(t){jQuery(t.target).siblings(".wp-color-picker")[0]&&(d("tr#"+r).remove(),v())}})}),d('input[type="radio"]:checked',".epofw_fields_table").length&&(t=(r=d('input[type="radio"]:checked')).val(),e=r.attr("id"),a=r.attr("data-label-name")+" - "+t,r=r.attr("addon_price"),console.log(" fieldValue "+t),console.log(" fieldID "+e),console.log(" trFieldName "+a),console.log(" fieldPrice "+r),g(t,e,a,r),v()),d(document).on("change",".epofw_fields_table input, .epofw_fields_table textarea",i.onKeyUpChangeAddon),d(document).on("change",".epofw_fields_table select",i.onKeyUpChangeSelectAddon),d(document).on("change",".variations_form .variations select",i.getSelectedVariation)},getSelectedVariation:function(){var t=d(".variations_form").data("product_variations"),e=r(),t=a(t,e.data);t&&e.count==e.chosenCount&&t.hasOwnProperty(0)&&(t=(e=t[0].display_price).toFixed(p).replace(".",l),d("#addon_prd_details .addon_price").attr("data-addon-price",e),d("#addon_prd_details .addon_price strong span").html('<span class="woocommerce-Price-currencySymbol">'+c+"</span>"+t),v())},onKeyUpChangeAddon:function(){var t,e,a,r,i,n,o=d(this).attr("data-inp-type");"checkbox"===o?(t=d(this).attr("data-label-name"),e=d(this).val(),a=d(this).attr("addon_price"),r=d(this).attr("id"),i=t+" - "+e,d(this).is(":checked")?g(e,r,i,a):d("tr#"+r).remove()):"checkboxgroup"===o?(n=d(this).parent().parent().parent().attr("id"),d("#"+n+" .epofw_field_checkboxgroup").prop("checked",!1),d(this).prop("checked",!0),t=d(this).attr("data-label-name"),e=d(this).val(),r=d(this).attr("id"),n=d(this).attr("name"),g(e=d("input[name="+n+"]:checked").val(),r,i=t+" - "+e,a=d("input[name="+n+"]:checked").attr("addon_price"))):"radiogroup"===o?(t=d(this).attr("data-label-name"),e=d(this).val(),r=d(this).attr("id"),n=d(this).attr("name"),g(e=d("input[name="+n+"]:checked").val(),r,i=t+" - "+e,a=d("input[name="+n+"]:checked").attr("addon_price"))):(t=d(this).attr("data-label-name"),e=d(this).val(),a=d(this).attr("addon_price"),d(this).attr("addon_price_type"),g(e,r=d(this).attr("id"),i=t+" - "+e,a)),m(),v()},onKeyUpChangeSelectAddon:function(){var t=d(this).parent().children().attr("data-label-name");void 0===t&&(t=d(this).parent().parent().children().children().attr("data-label-name"));var a,e=d(this).val(),r=d(this).attr("id"),t=t+" - "+e,i="multiselect"===d(this).attr("data-inp-type")?("All"===d.trim(e)&&(d("#"+r+" > option").prop("selected","selected"),d("#"+r+" > option").prop("selected","selected"),d("#"+r).trigger("change")),a=0,d("#"+r+" :selected").map(function(t,e){a=parseFloat(a)+parseFloat(d(e).attr("addon_price"))}).get(),a):_(i=d("option:selected",this).attr("addon_price"));""!==e?g(e,r,t,i):d("tr#"+r).remove(),m(),v()}};d(function(){i.init()})}(jQuery);